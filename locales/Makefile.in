DEPTH					 = ../..
topsrcdir			 = @top_srcdir@
srcdir					= @srcdir@
VPATH					 = @srcdir@


include $(DEPTH)/config/autoconf.mk

APP_VERSION = $(shell cat $(srcdir)/../config/version.txt)
CODE_NAME = $(shell cat $(srcdir)/../config/codename.txt)

DEFINES += \
	-DAPP_NAME=$(MOZ_APP_DISPLAYNAME) \
	-DAPP_VERSION=$(APP_VERSION) \
	-DCODE_NAME=$(CODE_NAME) \
	$(NULL)

ifneq (,$(filter mac cocoa, $(MOZ_WIDGET_TOOLKIT)))
DEFINES += -DTOOLBAR_CUSTOMIZATION_SHEET
endif

_AVAILABLE_LOCALES=en-US

_EXTRA_LOCALES =\
    cs \
    de \
    es-ES \
    fi \
    fr \
    gl \
    he \
    it \
    ja \
    ko \
    nl \
    pl \
    ru \
    sl \
    sv-SE \
    zh-CN \
    zh-TW \
    hu \
    sr \
    $(NULL)

_EXTENSIONS_=\
	base \
	sidebars/scripteditor \
	sidebars/stylesheets \
	sidebars/cssproperties \
	sidebars/its20 \
	sidebars/domexplorer \
	extensions/fs \
	extensions/gfd \
	extensions/markdown \
	extensions/op1 \
	$(NULL)

libs:: $(_AVAILABLE_LOCALES)
	@for ext in $(_EXTENSIONS);\
	do \
		cp $(topsrcdir)/bluegriffon/$$ext/jar.mn.in $(topsrcdir)/bluegriffon/$$ext/jar.mn; \
		for locale in $(_AVAILABLE_LOCALES);\
		do \
			rm -fr $(topsrcdir)/bluegriffon/$$ext/locale/$$locale; \
			mkdir -p $(topsrcdir)/bluegriffon/$$ext/locale/; \
			cat $$locale/`basename $$ext`.mn >> $(topsrcdir)/bluegriffon/$$ext/jar.mn; \
			cp -Rf $$locale/bluegriffon/$$ext/locale/* $(topsrcdir)/bluegriffon/$$ext/locale/$$locale; \
		done \
	done

include $(topsrcdir)/config/rules.mk

